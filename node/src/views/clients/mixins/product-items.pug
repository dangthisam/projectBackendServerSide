mixin products-grid(item)
  .col-12.col-sm-6.col-md-4.col-lg-3.mb-4
    .card.product-item.shadow-sm.border-0.h-100.position-relative(
      style="border-radius: 20px; background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden;"
      onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 20px 40px rgba(44,62,80,.2)'"
      onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(44,62,80,.08)'"
    )
      //- Ảnh sản phẩm với hiệu ứng gradient overlay
      .inner-image.position-relative.overflow-hidden(
        style="border-radius: 20px 20px 0 0; background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);"
      )
        .image-wrapper(style="height: 220px; overflow: hidden; position: relative;")
          img.card-img-top(
            src=item.thumbnail, 
            alt=item.title,
            style="object-fit: cover; height: 100%; width: 100%; border-radius: 20px 20px 0 0; transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);"
            onmouseover="this.style.transform='scale(1.1)'"
            onmouseout="this.style.transform='scale(1)'"
          )
          
          //- Gradient overlay đẹp hơn
          .image-overlay.position-absolute.top-0.start-0.w-100.h-100.d-flex.align-items-center.justify-content-center(
            style="background: linear-gradient(135deg, rgba(103, 126, 234, 0.85) 0%, rgba(118, 75, 162, 0.85) 100%); opacity: 0; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);"
            onmouseover="this.style.opacity=1"
            onmouseout="this.style.opacity=0"
          )
            .d-flex.flex-column.align-items-center.gap-3
              a.btn.btn-light.rounded-pill.px-4.py-2.fw-semibold(
                href=`/products/detail/${item.slug}`
                style="backdrop-filter: blur(15px); background: rgba(255,255,255,0.95); border: 2px solid rgba(255,255,255,0.3); transition: all 0.3s ease; transform: translateY(20px);"
                onmouseover="this.style.transform='translateY(0px)'; this.style.background='rgba(255,255,255,1)'"
                onmouseout="this.style.transform='translateY(20px)'; this.style.background='rgba(255,255,255,0.95)'"
              )
                i.fas.fa-eye.me-2
                | Xem nhanh
              button.btn.btn-danger.rounded-pill.px-4.py-2.fw-semibold(
                type="button"
                style="backdrop-filter: blur(15px); background: linear-gradient(135deg, #ff6b6b, #ee5a24); border: none; transition: all 0.3s ease; transform: translateY(20px);"
                onmouseover="this.style.transform='translateY(0px) scale(1.05)'"
                onmouseout="this.style.transform='translateY(20px) scale(1)'"
              )
                i.fas.fa-cart-plus.me-2
                | Thêm giỏ

        //- Badges với thiết kế mới
        .position-absolute.top-0.start-0.p-3
          if item.discountPercentage && item.discountPercentage > 0
            .badge.text-white.rounded-pill.px-3.py-2.me-2(
              style="background: linear-gradient(135deg, #ff6b6b, #ee5a24); font-size: 0.85rem; font-weight: 600; box-shadow: 0 4px 15px rgba(238, 90, 36, 0.4);"
            ) -#{item.discountPercentage}%
          if item.new
            .badge.text-white.rounded-pill.px-3.py-2(
              style="background: linear-gradient(135deg, #51cf66, #40c057); font-size: 0.85rem; font-weight: 600; box-shadow: 0 4px 15px rgba(64, 192, 87, 0.4);"
            ) Mới

      //- Nội dung sản phẩm với spacing tốt hơn
      .card-body.p-4.d-flex.flex-column.gap-3
        //- Category với icon đẹp hơn
        .d-flex.align-items-center.mb-1
          .rounded-circle.d-flex.align-items-center.justify-content-center.me-2(
            style="width: 24px; height: 24px; background: linear-gradient(135deg, #667eea, #764ba2);"
          )
            i.fas.fa-tag(style="font-size: 0.7rem; color: white;")
          small.text-muted.fw-medium(style="font-size: 0.85rem;")
            | #{item.category || "Điện tử"}

        //- Tiêu đề sản phẩm
        h5.card-title.mb-2.lh-sm(
          style="font-size: 1.1rem; font-weight: 700; color: #2c3e50; letter-spacing: -0.02em;"
        )
          a.text-decoration-none(
            href=`/products/detail/${item.slug}` 
            style="color: inherit; transition: color 0.3s ease;"
            onmouseover="this.style.color='#667eea'"
            onmouseout="this.style.color='#2c3e50'"
          )
            = item.title

        //- Rating với thiết kế mới
        .d-flex.align-items-center.mb-3
          .d-flex.me-2
            - for (let i = 1; i <= 5; i++)
              i.fas.fa-star.me-1(
                class=i <= (item.rating || 4) ? 'text-warning' : 'text-light'
                style="font-size: 0.9rem; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));"
              )
          small.text-muted.fw-medium
            | (#{item.reviews || Math.floor(Math.random() * 100 + 10)} đánh giá)

        //- Features với icon
        .d-flex.flex-wrap.gap-2.mb-3
          .badge.bg-light.text-dark.rounded-pill.px-3.py-2(
            style="font-size: 0.8rem; font-weight: 500; border: 1px solid #e9ecef;"
          )
            i.fas.fa-shield-alt.me-1.text-primary
            | #{item.features && item.features[0] ? item.features[0] : 'Chính hãng'}
          .badge.bg-light.text-dark.rounded-pill.px-3.py-2(
            style="font-size: 0.8rem; font-weight: 500; border: 1px solid #e9ecef;"
          )
            i.fas.fa-tools.me-1.text-success
            | #{item.features && item.features[1] ? item.features[1] : 'BH 12 tháng'}

        //- Giá với thiết kế nổi bật
        .mt-auto
          .d-flex.align-items-end.justify-content-between.mb-3
            .price-wrapper
              .text-danger.fw-bold.mb-1(
                style="font-size: 1.3rem; font-weight: 800; background: linear-gradient(135deg, #e74c3c, #c0392b); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"
              ) $#{item.priceNew}
              if item.price && item.price > item.priceNew
                .text-muted.text-decoration-line-through(
                  style="font-size: 0.9rem; opacity: 0.7;"
                ) $#{item.price}
            
            //- Tiết kiệm
            if item.price && item.price > item.priceNew
              .text-end
                small.text-success.fw-semibold
                  | Tiết kiệm $#{(item.price - item.priceNew).toFixed(2)}

          //- Stock status với thiết kế mới
          .d-flex.align-items-center.justify-content-center.p-2.rounded-pill(
            style=`background: ${item.stock>10?'rgba(76,175,80,0.1)':item.stock>0?'rgba(255,193,7,0.1)':'rgba(244,67,54,0.1)'}; border: 1px solid ${item.stock>10?'rgba(76,175,80,0.3)':item.stock>0?'rgba(255,193,7,0.3)':'rgba(244,67,54,0.3)'};`
          )
            .rounded-circle.me-2(
              style=`width: 8px; height: 8px; background: ${item.stock>10?'#4caf50':item.stock>0?'#ffc107':'#f44336'}; animation: pulse 2s infinite;`
            )
            small.fw-semibold(
              class=item.stock>10?'text-success':item.stock>0?'text-warning':'text-danger'
              style="font-size: 0.85rem;"
            )
              | #{item.stock>10?'Còn hàng':item.stock>0?'Sắp hết':'Hết hàng'}

      //- Action Button với thiết kế gradient đẹp
      .card-footer.bg-transparent.border-0.p-4.pt-0
        a.btn.w-100.rounded-pill.fw-bold(
          href=`/products/detail/${item.slug}`
          style="padding: 12px 0; font-size: 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden;"
          onmouseover="this.style.transform='scale(1.02)'; this.style.boxShadow='0 8px 25px rgba(102, 126, 234, 0.4)'"
          onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none'"
        )
          i.fas.fa-eye.me-2
          | Xem chi tiết

    
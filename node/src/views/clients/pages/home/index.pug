extends ../../layout/default.pug
include ../../mixins/box-head.pug
include ../../mixins/products-layout.pug

block main
  //- Enhanced Hero Banner với animation và effects
  .banner-carousel#bannerCarousel
    //- Slide 1
    .banner-slide.active(style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://cdn.prod.website-files.com/6705f4b15aee7ca914fff083/685e47a2b2ab5e3998c98aac_Table%20Usage%20Template%20Image-p-2000.png');")
      .banner-overlay
      .banner-content
        h1.banner-title iPhone 15 Pro Max
        p.banner-subtitle Công nghệ tiên tiến nhất với chip A17 Pro và camera 48MP siêu nét
        a.banner-btn.btn.btn-primary(href="/products/iphone-15")
          i.fas.fa-shopping-cart.me-2
          | Mua ngay
      .progress-bar

    //- Slide 2
    .banner-slide(style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1496171367470-9ed9a91ea931?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');")
      .banner-overlay
      .banner-content
        h1.banner-title Laptop Gaming ROG
        p.banner-subtitle Hiệu năng vượt trội với RTX 4080 và màn hình 240Hz
        a.banner-btn.btn.btn-primary(href="/products/laptop-gaming")
          i.fas.fa-bolt.me-2
          | Khám phá
      .progress-bar

    //- Slide 3
    .banner-slide(style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');")
      .banner-overlay
      .banner-content
        h1.banner-title Tai nghe Sony WH-1000XM5
        p.banner-subtitle Chống ồn hoàn hảo, âm thanh Hi-Res và pin 30 giờ
        a.banner-btn.btn.btn-primary(href="/products/headphones")
          i.fas.fa-headphones.me-2
          | Nghe thử
      .progress-bar

    //- Slide 4
    .banner-slide(style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://ix-marketing.imgix.net/case-study_tile_bentobox.png?auto=format,compress&w=1946');")
      .banner-overlay
      .banner-content
        h1.banner-title Apple Watch Ultra 2
        p.banner-subtitle Thiết kế titan cứng cáp, GPS chính xác và pin 36 giờ
        a.banner-btn.btn.btn-primary(href="/products/apple-watch")
          i.fas.fa-clock.me-2
          | Đặt hàng
      .progress-bar

    //- Controls
    .carousel-controls.prev
      button.carousel-btn(type="button" onclick="prevSlide()")
        i.fas.fa-chevron-left

    .carousel-controls.next
      button.carousel-btn(type="button" onclick="nextSlide()")
        i.fas.fa-chevron-right

    //- Indicators
    .carousel-indicators
      each val, idx in [0,1,2,3]
        .indicator(class= idx === 0 ? "active" : "", onclick=`currentSlide(${idx})`)

  //- Scroll indicator arrow
  .scroll-indicator.animate-bounce
    i.fas.fa-chevron-down

  //- Enhanced Main Content
  .main-content.position-relative
    //- Background Pattern
    .content-bg-pattern

    .container.content-container
      .section-filter.mb-4
        form#filterForm.d-flex.flex-wrap.gap-3.align-items-center.justify-content-center
          //- Lọc theo danh mục sản phẩm (select)
          .filter-group
            label.form-label.me-2(for="filter-category") Danh mục:
            select#filter-category.form-select(style="min-width: 150px;")
              option(value="") Tất cả
              each category in categoryProducts
                option(value=category.slug) #{category.title}

          //- Lọc theo thương hiệu (checkbox)
          .filter-group
            span.form-label.me-2 Thương hiệu:
            each brand in ['Apple', 'Samsung', 'Xiaomi', 'Dell', 'HP']
              label.form-check.form-check-inline
                input.form-check-input(type="checkbox" name="brand" value=brand)
                span.form-check-label= brand

          //- Lọc theo mức giá (select)
          .filter-group
            label.form-label.me-2(for="filter-price") Giá:
            select#filter-price.form-select(style="min-width: 150px;")
              option(value="") Tất cả
              option(value="0-100") Dưới 100$
              option(value="100-500") 100$ - 500$
              option(value="500-1000") 500$ - 1000$
              option(value="1000-") Trên 1000$

          //- Nút reset bộ lọc
          button.btn.btn-secondary(type="button" id="filterResetBtn") Đặt Lại

      //- Featured Products Section
      section#products.products-section.animate-on-scroll
        .section-header.text-center.mb-5
          .section-badge
            i.fas.fa-star.me-2
            span Nổi Bật
          h2.section-title #{title}
          p.section-subtitle Những sản phẩm được yêu thích nhất
          .section-divider

        .row.align-items-center.mb-4

        .products-wrapper
          //- Gọi mixin products-layout với productsFeatured
          +products-layout(productsFeatured)

      //- Featured Products Section (lặp lại - bạn có thể gộp nếu cần)
      section#products.products-section.animate-on-scroll
        .section-header.text-center.mb-5
          .section-badge
            i.fas.fa-star.me-2
            span Nổi Bật
          h2.section-title #{title}
          p.section-subtitle Những sản phẩm được yêu thích nhất
          .section-divider

        .row.align-items-center.mb-4
          .col
          .col-auto
            a.btn.btn-outline-danger.btn-modern(href="/products?featured=1")
              i.fas.fa-fire.me-2
              span Xem tất cả
              .btn-arrow &rarr;

        .products-wrapper
          +products-layout(productsFeatured)

      //- Enhanced Promotional Banner
      .promo-banner-enhanced.my-5
        .promo-bg-animation
          .promo-wave.wave-1
          .promo-wave.wave-2
          .promo-wave.wave-3

        .promo-content.position-relative
          .promo-icon-wrapper
            .promo-icon-bg
            i.fas.fa-percent.promo-icon

          .promo-text
            h3.promo-title
              span.text-flash Flash Sale
              span.text-highlight 24h
            p.promo-subtitle Giảm giá cực sốc - Chỉ hôm nay!
            .promo-features
              .feature-item
                i.fas.fa-check-circle
                span Miễn phí vận chuyển
              .feature-item
                i.fas.fa-check-circle
                span Đổi trả 30 ngày

          .promo-timer
            .timer-item
              .timer-circle
                span.timer-number(data-target="12") 12
              span.timer-label Giờ
            .timer-item
              .timer-circle
                span.timer-number(data-target="34") 34
              span.timer-label Phút
            .timer-item
              .timer-circle
                span.timer-number(data-target="56") 56
              span.timer-label Giây

          a.btn.btn-warning.promo-btn-enhanced(href="/flash-sale")
            .btn-lightning
            i.fas.fa-lightning-bolt.me-2
            span Mua Ngay
            .btn-pulse

      //- Stylish Divider
      .section-divider-fancy.my-5
        .divider-line
        .divider-icon
          i.fas.fa-gem
        .divider-line

      //- New Products Section
      section.products-section.animate-on-scroll
        .section-header.text-center.mb-5
          .section-badge.badge-new
            i.fas.fa-sparkles.me-2
            span Mới Nhất
          h2.section-title Sản phẩm mới
          p.section-subtitle Cập nhật những xu hướng mới nhất
          .section-divider

        .row.align-items-center.mb-4
          .col
          .col-auto
            a.btn.btn-outline-primary.btn-modern(href="/products?sort=new")
              i.fas.fa-sparkles.me-2
              span Xem tất cả
              .btn-arrow &rarr;

        .products-wrapper
          +products-layout(newProductCreate)

      //- Enhanced Newsletter Banner
      .newsletter-banner-enhanced.my-5
        .newsletter-bg-pattern
        .newsletter-content.position-relative
          .row.align-items-center
            .col-lg-6
              .newsletter-icon-wrapper
                .newsletter-icon-bg
                i.fas.fa-envelope-open.newsletter-icon

              .newsletter-text
                h3.newsletter-title
                  span.gradient-text Đăng Ký
                  span Nhận Tin
                p.newsletter-subtitle Nhận thông báo về khuyến mãi và sản phẩm mới nhất
                .newsletter-benefits
                  .benefit-item
                    i.fas.fa-check
                    span Khuyến mãi độc quyền
                  .benefit-item
                    i.fas.fa-check
                    span Sản phẩm mới sớm nhất
                  .benefit-item
                    i.fas.fa-check
                    span Voucher miễn phí

            .col-lg-6
              .newsletter-form-wrapper
                .newsletter-form
                  .form-group
                    .input-wrapper
                      input.form-control.newsletter-input(
                        type="email"
                        placeholder="Nhập email của bạn..."
                        required
                      )
                      .input-focus-line
                    button.btn.btn-success.newsletter-submit(type="submit")
                      i.fas.fa-paper-plane.me-2
                      span Đăng Ký
                      .btn-success-ripple

                .newsletter-note
                  i.fas.fa-shield-alt.me-2
                  span Chúng tôi không chia sẻ thông tin của bạn

extends ../../layout/default.pug
include ../../mixins/box-head.pug

block main
  .container.my-3
    .row
      .col-12
        .chat-container
          +box-head("Chat")
          .chat(my-id=user.id)
            .inner-body
              each chat in chats
                div(class=(chat.userId===user.id ? "inner-outgoing" : "inner-incoming"))
                  if chat.userId!==user.id
                    .inner-name 
                      | #{chat.infoUser.fullName}
                      span.online-status
                    .inner-content #{chat.content}
                    .message-time Vừa xong
                  else
                    .inner-content #{chat.content}
                    .message-time Đã gửi
              
              //- Typing indicator (hiển thị khi có người đang gõ)
              .inner-incoming.typing-indicator(style="display: none;")
                .typing-dot
                .typing-dot
                .typing-dot

            .inner-foot
              form.inner-form(action="", method="POST", autocomplete="off")
                input(type="text", placeholder="Nhập nội dung ...", name="content", required)
                button(type="submit")
                  i.fa-solid.fa-paper-plane

          //- Scroll to bottom button
          button.scroll-to-bottom(onclick="scrollToBottom()")
            i.fa-solid.fa-chevron-down
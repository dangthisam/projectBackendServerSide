extends ../../layout/default.pug
include ../../mixins/box-head.pug
include ../../mixins/alert.pug

block main
  +alert(5000)
  +alertError(5000)
  
  .container.my-5
    .row
      .col-12
        +box-head(title)
    .row
      .col-12
        .alert.alert-success.py-4.fs-5.shadow-sm.rounded-3
          i.fas.fa-check-circle.text-success.fs-3.me-2
          | ðŸŽ‰ ChÃºc má»«ng báº¡n Ä‘Ã£ Ä‘áº·t hÃ ng thÃ nh cÃ´ng! 
          br
          | ChÃºng tÃ´i sáº½ xá»­ lÃ½ Ä‘Æ¡n hÃ ng trong thá»i gian sá»›m nháº¥t.

    if order
      .row.mt-4
        .col-lg-6.mb-4
          .card.shadow-lg.rounded-4.border-0
            .card-header.bg-gradient-primary.text-white.rounded-top-4
              h4.mb-0.fw-bold
                i.fas.fa-user-check.me-2
                | ThÃ´ng tin cÃ¡ nhÃ¢n
            .card-body
              table.table.table-borderless.mb-0
                tbody
                  tr
                    td.w-30.fw-bold Há» tÃªn
                    td= order.userInfo.fullName
                  tr
                    td.w-30.fw-bold Sá»‘ Ä‘iá»‡n thoáº¡i
                    td= order.userInfo.phone
                  tr
                    td.w-30.fw-bold Äá»‹a chá»‰
                    td= order.userInfo.address
        .col-lg-6.mb-4
          .card.shadow-lg.rounded-4.border-0
            .card-header.bg-gradient-info.text-white.rounded-top-4
              h4.mb-0.fw-bold
                i.fas.fa-file-invoice.me-2
                | ThÃ´ng tin Ä‘Æ¡n hÃ ng
            .card-body
              table.table.table-borderless.mb-0
                tbody
                  tr
                    td.w-40.fw-bold MÃ£ Ä‘Æ¡n hÃ ng
                    td= order._id
                  tr
                    td.w-40.fw-bold NgÃ y Ä‘áº·t
                    td= new Date(order.createdAt).toLocaleString('vi-VN')
                  tr
                    td.w-40.fw-bold Tráº¡ng thÃ¡i
                    td
                      span.badge.bg-success.fs-6 ÄÃ£ Ä‘áº·t hÃ ng

      .row
        .col-12
          .card.shadow-lg.rounded-4.border-0
            .card-header.bg-gradient-warning.text-dark.rounded-top-4
              h4.mb-0.fw-bold
                i.fas.fa-list-ul.me-2
                | Danh sÃ¡ch sáº£n pháº©m
            .card-body.p-0
              table.table.table-bordered.table-hover.align-middle.bg-white.mb-0
                thead.table-danger
                  tr.text-center.align-middle
                    th STT
                    th áº¢nh
                    th TÃªn
                    th GiÃ¡ sau khuyáº¿n mÃ£i
                    th Sá»‘ lÆ°á»£ng
                    th Tá»•ng tiá»n
                tbody
                  if order.products && order.products.length > 0
                    each item, index in order.products
                      tr.text-center.align-middle.cart-item-row
                        td.fw-bold #{index + 1}
                        td
                          img(
                            src=item.productInfo.thumbnail, 
                            alt=item.productInfo.title, 
                            width="70", 
                            height="70", 
                            class="rounded shadow border bg-light",
                            style="object-fit:cover;"
                          )
                        td.text-start.fw-semibold
                          a.text-decoration-none.text-dark(
                            title=item.productInfo.title
                          ) 
                            | #{item.productInfo.title}
                        td.text-success.fw-bold #{item.productInfo.priceNew.toLocaleString('vi-VN')}â‚«
                        td.text-center.mx-auto #{item.quantity}
                        td.text-danger.fw-bold.fs-5 #{item.totalPrice.toLocaleString('vi-VN')}â‚«
                  else
                    tr
                      td(colspan="6").text-center.text-muted ChÆ°a cÃ³ sáº£n pháº©m nÃ o trong Ä‘Æ¡n hÃ ng

            .card-footer.bg-white.py-4
              .d-flex.flex-column.flex-md-row.justify-content-between.align-items-center.gap-3
                .d-flex.align-items-center.gap-3
                  h4.mb-0.fw-bold.text-danger Tá»•ng Ä‘Æ¡n hÃ ng:
                  span.fs-3.fw-bold.text-success
                    i.fas.fa-coins.me-2
                    | #{order.totalPrice ? order.totalPrice.toLocaleString('vi-VN') : 0}â‚«
